<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.possys.Order_service.Order_Mapper">
 	<select id="order_list" resultType="kr.or.possys.Order_service.Order">
		select table_order_id,
		table_order_num,
		table_order_end,
		table_order_date 
		from table_order
	</select>
 	<select id="order_modify_form" parameterType = "String" resultType="kr.or.possys.Order_service.Order">
		select table_order_id,
		table_order_num,
		table_order_end,
		table_order_date 
		from table_order
		where table_order_id = #{table_order_id}
	</select>
	
	 	<select id="order_detail" parameterType = "String" resultType="kr.or.possys.Order_service.Order">
		select table_order_id,
		menu_id,
		menu_name,
		order_detail_ea,
		order_detail_sum 
		from order_detail where table_order_id= #{table_order_id}
		</select>
		
		<select id="get_price" parameterType = "String" resultType="String">
		select
		menu_price
		from menu where menu_id= #{menu_id}
		</select>
		
	<update id="order_end_t" parameterType="String">
		update table_order
		set table_order_end = 't'
		where table_order_id = #{table_order_id}
	</update>
	
	<update id="order_modify_action" parameterType="kr.or.possys.Order_service.Order">
		update order_detail
		set 
		where table_order_id = #{table_order_id}
	</update>
	
		<update id="order_detail_modify" parameterType="kr.or.possys.Order_service.Order">
		update order_detail
		set
		menu_name = #{menu_name},
		order_detail_ea = #{order_detail_ea},
		order_detail_sum = #{order_detail_sum}
		where table_order_id = #{table_order_id} and
		menu_id = #{menu_id}
		</update>
		
		<insert id="order_detail_insert" parameterType="kr.or.possys.Order_service.Order">
		insert into order_detail(
		table_order_id,
		menu_id,
		menu_name,
		order_detail_ea,
		order_detail_sum)
		values (
		#{table_order_id},
		#{menu_id},
		#{menu_name},
		#{order_detail_ea},
		#{order_detail_sum}
		)
		
		</insert>
		<delete id = "order_delete" parameterType = "String">
		delete from table_order where table_order_id=#{table_order_id}
		</delete>
		
		<delete id = "order_detail_delete" parameterType = "String">
		delete from order_detail where table_order_id=#{table_order_id}
		</delete>
</mapper>